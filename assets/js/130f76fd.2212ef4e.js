"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[627],{894:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return p},contentTitle:function(){return d},metadata:function(){return u},toc:function(){return c},WIDTH:function(){return m},HEIGHT:function(){return h},ridgeSpline:function(){return f},default:function(){return v}});var i=t(7462),r=t(3366),a=(t(7294),t(3905)),l=t(69),o=t(9594),s=["components"],p={title:"Splines"},d=void 0,u={unversionedId:"splines",id:"splines",isDocsHomePage:!1,title:"Splines",description:"export const WIDTH = 300",source:"@site/examples/splines.mdx",sourceDirName:".",slug:"/splines",permalink:"/deepslate/examples/splines",tags:[],version:"current",frontMatter:{title:"Splines"},sidebar:"defaultSidebar",previous:{title:"Noise Sampler",permalink:"/deepslate/examples/noisesampler"},next:{title:"Structure Renderer",permalink:"/deepslate/examples/structurerenderer"}},c=[{value:"Simple",id:"simple",children:[]},{value:"Nested",id:"nested",children:[]},{value:"With TerrainShaper",id:"with-terrainshaper",children:[]}],m=300,h=200;function f(e,n,t,i,r,a){var o=Math.max(.5*(n-e),a),s=5*(t-n);return new l.$y("ridge",(function(e){return e})).addPoint(-1,e,o).addPoint(-.4,n,Math.min(o,s)).addPoint(0,t,s).addPoint(.4,i,2*(i-t)).addPoint(1,r,.7*(r-i))}var g={toc:c,WIDTH:m,ridgeSpline:f};function v(e){var n=e.components,t=(0,r.Z)(e,s);return(0,a.kt)("wrapper",(0,i.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"simple"},"Simple"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const spline = new Spline<number>('spline', x => x)\n    .addPoint(0, 0)\n    .addPoint(1, 1)\n\nconst value = spline.apply(0.4)\n")),(0,a.kt)(o.p,{name:"Simple [0, 0] -> [1, 1]",width:m,height:h,range:[0,1],spline:new l.$y("spline",(function(e){return e})).addPoint(0,0).addPoint(1,1),mdxType:"SplinePlot"}),(0,a.kt)("h2",{id:"nested"},"Nested"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const spline = new Spline('spline2', x => x)\n    .addPoint(0, 0)\n    .addPoint(0.4, new Spline('spline3', x => 2 * x - x * x)\n        .addPoint(0.2, -1)\n        .addPoint(1, 1))\n\nconst value = spline.apply(0.4)\n")),(0,a.kt)(o.p,{name:"Nested with different mapper",width:m,height:h,range:[0,1],spline:new l.$y("spline2",(function(e){return e})).addPoint(0,0).addPoint(.4,new l.$y("spline3",(function(e){return 2*e-e*e})).addPoint(.2,-1).addPoint(1,1)),mdxType:"SplinePlot"}),(0,a.kt)("h2",{id:"with-terrainshaper"},"With TerrainShaper"),(0,a.kt)(o.p,{name:"Offset from continentalness [-1.1, 1]",width:m,height:h,range:[-1.1,1],spline:function(e){return l.bg.offset(l.bg.point(e,-.45,0))},mdxType:"SplinePlot"}),(0,a.kt)(o.p,{name:"Factor from continentalness [-0.3, 0.3]",width:m,height:h,range:[-.3,.3],spline:function(e){return l.bg.factor(l.bg.point(e,-.45,0))},mdxType:"SplinePlot"}),(0,a.kt)(o.p,{name:"Peaks from continentalness [-0.3, 0.3]",width:m,height:h,range:[-.3,.3],spline:function(e){return l.bg.peaks(l.bg.point(e,-.8,.6))},mdxType:"SplinePlot"}),(0,a.kt)(o.p,{name:"Peaks from ridges [0, 1]",width:m,height:h,range:[0,1],spline:function(e){return l.bg.peaks({continents:.11,erosion:-.45,weirdness:0,ridges:e})},mdxType:"SplinePlot"}),(0,a.kt)(o.p,{name:"Wide plateau from ridges [-1, 1]",width:m,height:h,range:[-1,1],spline:f(-.25,.35,.35,.35,.42,.5),mdxType:"SplinePlot"}),(0,a.kt)(o.p,{name:"Plains ridges from ridges [-1, 1]",width:m,height:h,range:[-1,1],spline:f(-.1,.01,.01,.03,.1,.5),mdxType:"SplinePlot"}))}v.isMDXComponent=!0},9594:function(e,n,t){t.d(n,{Z:function(){return r},p:function(){return a}});var i=t(7294);function r(e){var n,t=e.name,r=e.width,a=e.height,l=e.scale,o=e.fetcher,s=e.initializer,p=e.column,d=e.sampler,u=e.colorizer;a=null!=(n=a)?n:r;var c=(0,i.useRef)(),m=(0,i.useState)(void 0),h=m[0],f=m[1];return(0,i.useEffect)((function(){Promise.resolve(null==o?void 0:o()).then((function(e){var n=null==s?void 0:s(e),t=performance.now(),i=d(n),l=c.current.getContext("2d"),o=l.createImageData(r,a);requestAnimationFrame((function(){for(var e=0;e<r;e+=1){null==p||p(n,e);for(var s=0;s<a;s+=1){var d=4*e+4*s*o.width,c=i(e,s),m=u(c),h="number"==typeof m?[m,m,m]:m,g=h[0],v=h[1],w=h[2];o.data[d]=g,o.data[d+1]=v,o.data[d+2]=w,o.data[d+3]=255}}l.putImageData(o,0,0),f(performance.now()-t)}))}))}),[]),i.createElement("div",{className:"plot pixelated"},i.createElement("span",null,t," (",h?h.toFixed(0)+"ms":"loading",")"),i.createElement("canvas",{ref:c,width:r,height:a,style:l?{width:r*l+"px",height:a*l+"px"}:void 0}))}function a(e){var n,t,r,a=e.name,l=e.width,o=e.height,s=e.scale,p=e.range,d=e.spline;o=null!=(n=o)?n:l;var u=p[0],c=p[1],m=(0,i.useRef)();return(0,i.useEffect)((function(){for(var e=m.current.getContext("2d"),n="function"==typeof d?d:function(e){return d.apply(e)},t=[],i=u;i<c;i+=(c-u)/l)t.push(n(i));var r=Math.min.apply(Math,[0].concat(t)),a=Math.max.apply(Math,[0].concat(t)),s=(20-o)/(a-r),p=function(e){return o-10+s*(e-r)};e.strokeStyle="#555",e.beginPath(),e.moveTo(0,p(0)),e.lineTo(l,p(0)),e.stroke(),e.strokeStyle="white",e.beginPath(),e.moveTo(0,p(t[0]));for(var h=1;h<t.length;h+=1)e.lineTo(h,p(t[h]));e.stroke()}),[]),i.createElement("div",{className:"plot"},i.createElement("span",null,a),i.createElement("canvas",{ref:m,width:l,height:null!=(t=o)?t:l,style:s?{width:l*s+"px",height:(null!=(r=o)?r:l)*s+"px"}:void 0}))}}}]);