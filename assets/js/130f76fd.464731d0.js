"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[627],{894:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return p},contentTitle:function(){return d},metadata:function(){return u},toc:function(){return c},WIDTH:function(){return m},HEIGHT:function(){return h},shaper:function(){return f},ridgeSpline:function(){return g},default:function(){return w}});var i=t(7462),r=t(3366),a=(t(7294),t(3905)),o=t(69),l=t(9594),s=["components"],p={title:"Splines"},d=void 0,u={unversionedId:"splines",id:"splines",isDocsHomePage:!1,title:"Splines",description:"export const WIDTH = 300",source:"@site/examples/splines.mdx",sourceDirName:".",slug:"/splines",permalink:"/deepslate/examples/splines",tags:[],version:"current",frontMatter:{title:"Splines"},sidebar:"defaultSidebar",previous:{title:"Noise Sampler",permalink:"/deepslate/examples/noisesampler"},next:{title:"Structure Renderer",permalink:"/deepslate/examples/structurerenderer"}},c=[{value:"Simple",id:"simple",children:[]},{value:"Nested",id:"nested",children:[]},{value:"With TerrainShaper",id:"with-terrainshaper",children:[]}],m=300,h=200,f=o.bg.overworld();function g(e,n,t,i,r,a){var l=Math.max(.5*(n-e),a),s=5*(t-n);return new o.$y("ridge",(function(e){return e})).addPoint(-1,e,l).addPoint(-.4,n,Math.min(l,s)).addPoint(0,t,s).addPoint(.4,i,2*(i-t)).addPoint(1,r,.7*(r-i))}var v={toc:c,WIDTH:m,shaper:f,ridgeSpline:g};function w(e){var n=e.components,t=(0,r.Z)(e,s);return(0,a.kt)("wrapper",(0,i.Z)({},v,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"simple"},"Simple"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const spline = new Spline<number>('spline', x => x)\n    .addPoint(0, 0)\n    .addPoint(1, 1)\n\nconst value = spline.apply(0.4)\n")),(0,a.kt)(l.p,{name:"Simple [0, 0] -> [1, 1]",width:m,height:h,range:[0,1],spline:new o.$y("spline",(function(e){return e})).addPoint(0,0).addPoint(1,1),mdxType:"SplinePlot"}),(0,a.kt)("h2",{id:"nested"},"Nested"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const spline = new Spline('spline2', x => x)\n    .addPoint(0, 0)\n    .addPoint(0.4, new Spline('spline3', x => 2 * x - x * x)\n        .addPoint(0.2, -1)\n        .addPoint(1, 1))\n\nconst value = spline.apply(0.4)\n")),(0,a.kt)(l.p,{name:"Nested with different mapper",width:m,height:h,range:[0,1],spline:new o.$y("spline2",(function(e){return e})).addPoint(0,0).addPoint(.4,new o.$y("spline3",(function(e){return 2*e-e*e})).addPoint(.2,-1).addPoint(1,1)),mdxType:"SplinePlot"}),(0,a.kt)("h2",{id:"with-terrainshaper"},"With TerrainShaper"),(0,a.kt)(l.p,{name:"Offset from continentalness [-1.1, 1]",width:m,height:h,range:[-1.1,1],spline:function(e){return f.offset(o.bg.point(e,-.45,0))},mdxType:"SplinePlot"}),(0,a.kt)(l.p,{name:"Factor from continentalness [-0.3, 0.3]",width:m,height:h,range:[-.3,.3],spline:function(e){return f.factor(o.bg.point(e,-.45,0))},mdxType:"SplinePlot"}),(0,a.kt)(l.p,{name:"Jaggedness from continentalness [-0.3, 0.3]",width:m,height:h,range:[-.3,.3],spline:function(e){return f.jaggedness(o.bg.point(e,-.8,.6))},mdxType:"SplinePlot"}),(0,a.kt)(l.p,{name:"Jaggedness from ridges [0, 1]",width:m,height:h,range:[0,1],spline:function(e){return f.jaggedness({continents:.11,erosion:-.45,weirdness:0,ridges:e})},mdxType:"SplinePlot"}),(0,a.kt)(l.p,{name:"Wide plateau from ridges [-1, 1]",width:m,height:h,range:[-1,1],spline:g(-.25,.35,.35,.35,.42,.5),mdxType:"SplinePlot"}),(0,a.kt)(l.p,{name:"Plains ridges from ridges [-1, 1]",width:m,height:h,range:[-1,1],spline:g(-.1,.01,.01,.03,.1,.5),mdxType:"SplinePlot"}))}w.isMDXComponent=!0},9594:function(e,n,t){t.d(n,{Z:function(){return r},p:function(){return a}});var i=t(7294);function r(e){var n,t=e.name,r=e.width,a=e.height,o=e.scale,l=e.fetcher,s=e.initializer,p=e.column,d=e.sampler,u=e.colorizer;a=null!=(n=a)?n:r;var c=(0,i.useRef)(),m=(0,i.useState)(void 0),h=m[0],f=m[1];return(0,i.useEffect)((function(){Promise.resolve(null==l?void 0:l()).then((function(e){var n=null==s?void 0:s(e),t=performance.now(),i=d(n),o=c.current.getContext("2d"),l=o.createImageData(r,a);requestAnimationFrame((function(){for(var e=0;e<r;e+=1){null==p||p(n,e);for(var s=0;s<a;s+=1){var d=4*e+4*s*l.width,c=i(e,s),m=u(c),h="number"==typeof m?[m,m,m]:m,g=h[0],v=h[1],w=h[2];l.data[d]=g,l.data[d+1]=v,l.data[d+2]=w,l.data[d+3]=255}}o.putImageData(l,0,0),f(performance.now()-t)}))}))}),[]),i.createElement("div",{className:"plot pixelated"},i.createElement("span",null,t," (",h?h.toFixed(0)+"ms":"loading",")"),i.createElement("canvas",{ref:c,width:r,height:a,style:o?{width:r*o+"px",height:a*o+"px"}:void 0}))}function a(e){var n,t,r,a=e.name,o=e.width,l=e.height,s=e.scale,p=e.range,d=e.spline;l=null!=(n=l)?n:o;var u=p[0],c=p[1],m=(0,i.useRef)();return(0,i.useEffect)((function(){for(var e=m.current.getContext("2d"),n="function"==typeof d?d:function(e){return d.apply(e)},t=[],i=u;i<c;i+=(c-u)/o)t.push(n(i));var r=Math.min.apply(Math,[0].concat(t)),a=Math.max.apply(Math,[0].concat(t)),s=(20-l)/(a-r),p=function(e){return l-10+s*(e-r)};e.strokeStyle="#555",e.beginPath(),e.moveTo(0,p(0)),e.lineTo(o,p(0)),e.stroke(),e.strokeStyle="white",e.beginPath(),e.moveTo(0,p(t[0]));for(var h=1;h<t.length;h+=1)e.lineTo(h,p(t[h]));e.stroke()}),[]),i.createElement("div",{className:"plot"},i.createElement("span",null,a),i.createElement("canvas",{ref:m,width:o,height:null!=(t=l)?t:o,style:s?{width:o*s+"px",height:(null!=(r=l)?r:o)*s+"px"}:void 0}))}}}]);